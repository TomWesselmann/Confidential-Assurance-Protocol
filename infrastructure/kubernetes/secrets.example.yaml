# Example Secrets Configuration
# DO NOT COMMIT REAL SECRETS TO VERSION CONTROL!
#
# Usage:
# 1. Copy this file to secrets.yaml
# 2. Replace Base64-encoded placeholder values with actual secrets
# 3. Apply with: kubectl apply -f k8s/secrets.yaml
# 4. Add secrets.yaml to .gitignore

---
apiVersion: v1
kind: Secret
metadata:
  name: cap-verifier-tls
  namespace: default
  labels:
    app: cap-verifier
type: kubernetes.io/tls
data:
  # TLS Server Certificate (PEM format, Base64-encoded)
  tls.crt: LS0tLS1CRUdJTi...  # Replace with actual cert
  # TLS Private Key (PEM format, Base64-encoded)
  tls.key: LS0tLS1CRUdJTi...  # Replace with actual key

---
apiVersion: v1
kind: Secret
metadata:
  name: cap-verifier-mtls
  namespace: default
  labels:
    app: cap-verifier
type: Opaque
data:
  # mTLS CA Certificate (PEM format, Base64-encoded)
  ca.crt: LS0tLS1CRUdJTi...  # Replace with actual CA cert
  # Optional: Client Certificate for mTLS
  client.crt: LS0tLS1CRUdJTi...  # Replace with actual client cert
  # Optional: Client Private Key for mTLS
  client.key: LS0tLS1CRUdJTi...  # Replace with actual client key

---
apiVersion: v1
kind: Secret
metadata:
  name: cap-agent-key
  namespace: default
  labels:
    app: cap-verifier
type: Opaque
data:
  # Ed25519 Private Key (32 bytes, Base64-encoded)
  agent.ed25519: LS0tLS1CRUdJTi...  # Replace with actual Ed25519 key
  # Ed25519 Public Key (32 bytes, Base64-encoded)
  agent.pub: LS0tLS1CRUdJTi...  # Replace with actual public key

---
# Generating Secrets:
#
# 1. TLS Certificate (Self-Signed for Testing):
#    openssl req -x509 -newkey rsa:4096 -keyout tls.key -out tls.crt -days 365 -nodes -subj "/CN=cap-verifier"
#    kubectl create secret tls cap-verifier-tls --cert=tls.crt --key=tls.key --dry-run=client -o yaml
#
# 2. mTLS CA Certificate:
#    openssl req -x509 -newkey rsa:4096 -keyout ca.key -out ca.crt -days 3650 -nodes -subj "/CN=CAP-CA"
#    kubectl create secret generic cap-verifier-mtls --from-file=ca.crt=ca.crt --dry-run=client -o yaml
#
# 3. Ed25519 Keys (using cap-agent):
#    cargo run -- sign keygen --dir keys
#    kubectl create secret generic cap-agent-key --from-file=agent.ed25519=keys/company.ed25519 --from-file=agent.pub=keys/company.pub --dry-run=client -o yaml
